---
title: "Dashboard"
author: "DecoderMaverick"
format:
  dashboard:
    orientation: rows
    theme: default
server: shiny
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, include = TRUE, warning = FALSE, message = FALSE)
```

```{r include=FALSE, echo = FALSE}
#| label: libraries
#| context: setup
library(tidyverse)
library(ggplot2)
library(dplyr)
library(stringr)
library(lubridate)
library(cobalt)
library(compareGroups)
```

```{r include=FALSE, echo = FALSE}
#| label: data loading
data_raw <- read.csv('unsw_datathon_2025.csv')
```

# Home {scrolling="true"}

## Introduction

<h1><span style="color:#423A8E">Welcome to the Australian Hip Fracture Registry</span></h1>

This dashboard is a tool to benchmark hospital performance against the ACSQHC clinical quality indicators. <br>

## Hospital Snapshot

### 

```{r include=FALSE, echo = FALSE}
alive_not_discharged <- data_raw %>%
  filter(mort365d  != 2 & (tarrdatetime_year>2023 | arrdatetime_year>2023 |admdatetimeop_year>2023) & is.na(hdisch_year))

patients_2024 <- data_raw %>%
  filter(tarrdatetime_year==2024 | arrdatetime_year==2024 |admdatetimeop_year==2024)
```


<h2><span style="color:#423A8E">Hospital Snapshot</span></h2>


<div class="kpi-cards">
  <div class="kpi-card" style="background-color:#FFC107;">
   Active Patients <br>`r nrow(alive_not_discharged)`
  </div>

  <div class="kpi-card" style="background-color:#DC3545;">
   Last Modified <br>`r format(Sys.time(), "%d %b %Y", tz="Australia/Sydney")` <br>`r format(Sys.time(), "%H:%M:%S", tz="Australia/Sydney")`
  </div>

  <div class="kpi-card" style="background-color:#198754;">
   2024 Records <br>`r nrow(patients_2024)`
  </div>

  <div class="kpi-card" style="background-color:#0D6EFD;">
   All Records <br>`r nrow(data_raw)`
  </div>
</div>


<style>

.kpi-cards {
  display: grid;
  grid-template-columns: repeat(4, minmax(200px, 1fr)); /* 4 columns */
  gap: 0.75rem;
  margin: 1rem 0;
}

.kpi-card {
  min-height: 80px;
  border-radius: 1rem;
  padding: 0.75rem 1rem;
  text-align: center;
  font-weight: 600;
  font-size: 0.98rem;
  color: #fff;
  box-shadow: 0 4px 12px rgba(0,0,0,0.12);

  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

/* Responsive: 2 columns on tablets, stack on phones */
@media (max-width: 992px) {
  .kpi-cards { grid-template-columns: repeat(2, minmax(220px, 1fr)); }
}
@media (max-width: 576px) {
  .kpi-cards { grid-template-columns: 1fr; }
}

</style>


##

### Hip Fracture Clinical Care Standard


<h2><span style="color:#423A8E">Hip Fracture Clinical Care Standard</span></h2>

<h3><span>Click the button to get to the next page</span></h3>

<!-- Row 1: 4 tiles -->
<div class="page-button">
  <div class="page-button__item">[Care at presentation](#qs-1)</div>
  <div class="page-button__item">[Pain management](#qs-2)</div>
  <div class="page-button__item">[Orthogeriatric model of care](#qs-3)</div>
  <div class="page-button__item">[Timing of surgery](#qs-4)</div>
</div>


<!-- Row 2: 3 tiles -->
<div class="page-button" style="grid-template-columns: repeat(3, minmax(220px, 1fr));">
  <div class="page-button__item">[Mobilisation and weight bearing](#qs-5)</div>
  <div class="page-button__item">[Minimising risk of another fracture](#qs-6)</div>
  <div class="page-button__item">[Transition from hospital care](#qs-7)</div>
</div>



<style>
/* Container: 4 columns on desktop */
.page-button {
  display: grid;
  grid-template-columns: repeat(4, minmax(200px, 1fr));
  gap: 0.75rem;
  margin: 1rem 0;
}

/* Tile style */
.page-button__item {
  min-height: 80px;
  border-radius: 1rem;
  padding: 0.75rem 1rem;
  text-align: center;
  font-weight: 600;
  font-size: 0.98rem;
  color: #ffff;
  background: #423A8E;
  box-shadow: 0 4px 12px rgba(0,0,0,0.12);

  display: flex;
  align-items: center;
  justify-content: center;
}

/* Make the whole tile clickable */
.page-button__item a {
  color: #fff;
  text-decoration: none;
  width: 100%;
}

/* Hover/focus states */
.page-button__item:hover,
.page-button__item:focus-within {
  background: #423A8E;
}

/* Responsive: 2 columns on tablets, stack on phones */
@media (max-width: 992px) {
  .page-button { grid-template-columns: repeat(2, minmax(220px, 1fr)); }
}
@media (max-width: 576px) {
  .page-button { grid-template-columns: 1fr; }
}
</style>


# QS 1 {#qs-1}

<h1><span style="color:#423A8E">Care at presentation</span></h1>

A person presenting to hospital with a suspected hip fracture receives care that is guided by timely assessment and management of medical conditions, including cognition.

Last Modified: `r format(Sys.time(), "%d %b %Y", tz="Australia/Sydney")` `r format(Sys.time(), "%H:%M:%S", tz="Australia/Sydney")`

<h2><span style="color:#423A8E">Indicator 1a</span></h2>

Proportion of patients with a hip fracture who were screened for cognitive impairment using a validated tool on presentation to hospital.

[⬅ Go Back to Home](#home){.btn .btn-secondary .btn-lg style="margin-top:20px; width:100%;"}

# QS 2 {#qs-2}

<h1><span style="color:#423A8E">Pain management</span></h1>

A person with a hip fracture is assessed for pain at the time of presentation to the emergency department and regularly throughout their acute admission. Pain management includes appropriate multimodal analgesia and nerve blocks, unless contraindicated.

Last Modified: `r format(Sys.time(), "%d %b %Y", tz="Australia/Sydney")` `r format(Sys.time(), "%H:%M:%S", tz="Australia/Sydney")`

## 

<h2><span style="color:#423A8E">Indicator 2a</span></h2>

Proportion of patients with a hip fracture who either received analgesia within 30 minutes of presentation or did not require it according to an assessment of their pain.

##

<h2><span style="color:#423A8E">Indicator 2b</span></h2>

Proportion of patients with a hip fracture who received a nerve block prior to surgery.

##

<h2><span style="color:#423A8E">Indicator 2c</span></h2>

Proportion of patients with a hip fracture who were transferred from another hospital for treatment who received a nerve block prior to transfer.

[⬅ Go Back to Home](#home){.btn .btn-secondary .btn-lg style="margin-top:20px; width:100%;"}

# QS 3 {#qs-3}

<h1><span style="color:#423A8E">Orthogeriatric model of care</span></h1>

A person with a hip fracture is offered treatment based on an orthogeriatric model of care as defined in the Australian and New Zealand Guideline for Hip Fracture Care. A coordinated multidisciplinary approach is used to identify and manage malnutrition, frailty, cognitive impairment and delirium.

Last Modified: `r format(Sys.time(), "%d %b %Y", tz="Australia/Sydney")` `r format(Sys.time(), "%H:%M:%S", tz="Australia/Sydney")`

## 

<h2><span style="color:#423A8E">Indicator 3a</span></h2>

Proportion of patients with a hip fracture who had a clinical frailty assessment using a validated tool.

##

<h2><span style="color:#423A8E">Indicator 3b</span></h2>

Proportion of admitted patients with a hip fracture who were assessed for delirium after surgery.

##

<h2><span style="color:#423A8E">Indicator 3c</span></h2>

Proportion of admitted patients with a hip fracture who received protein and energy oral nutritional supplements during their admission.

[⬅ Go Back to Home](#home){.btn .btn-secondary .btn-lg style="margin-top:20px; width:100%;"}

# QS 4 {#qs-4}

<h1><span style="color:#423A8E">Timing of surgery</span></h1>

A person with a hip fracture receives surgery within 36 hours of their first presentation to hospital.

Last Modified: `r format(Sys.time(), "%d %b %Y", tz="Australia/Sydney")` `r format(Sys.time(), "%H:%M:%S", tz="Australia/Sydney")`

<h2><span style="color:#423A8E">Indicator 4a</span></h2>

Proportion of admitted patients with a hip fracture who received surgery within 36 hours of presentation to first hospital.

[⬅ Go Back to Home](#home){.btn .btn-secondary .btn-lg style="margin-top:20px; width:100%;"}

# QS 5 {#qs-5}

<h1><span style="color:#423A8E">Mobilisation and weight bearing</span></h1>

A person with a hip fracture is mobilised without restrictions on weight bearing, starting the day of, or the day after, surgery, and at least once a day thereafter, according to their clinical condition and agreed goals of care.

Last Modified: `r format(Sys.time(), "%d %b %Y", tz="Australia/Sydney")` `r format(Sys.time(), "%H:%M:%S", tz="Australia/Sydney")`

## 

<h2><span style="color:#423A8E">Indicator 5a</span></h2>

Proportion of admitted patients with a hip fracture who were mobilised the day of, or the day after, their hip fracture surgery.

##

<h2><span style="color:#423A8E">Indicator 5b</span></h2>

Proportion of admitted patients with a hip fracture who experienced a new Stage-II-or-higher pressure injury.

[⬅ Go Back to Home](#home){.btn .btn-secondary .btn-lg style="margin-top:20px; width:100%;"}

# QS 6 {#qs-6}

<h1><span style="color:#423A8E">Minimising risk of another fracture</span></h1>

Before a person leaves hospital after a hip fracture, they receive a falls and bone health assessment and management plan, with appropriate referral for secondary fracture prevention.

Last Modified: `r format(Sys.time(), "%d %b %Y", tz="Australia/Sydney")` `r format(Sys.time(), "%H:%M:%S", tz="Australia/Sydney")`

<h2><span style="color:#423A8E">Indicator 6a</span></h2>

Proportion of admitted patients with a hip fracture who received bone protection medicine while in hospital or a prescription prior to separation from hospital.


[⬅ Go Back to Home](#home){.btn .btn-secondary .btn-lg style="margin-top:20px; width:100%;"}

# QS 7 {#qs-7}

<h1><span style="color:#423A8E">Transition from hospital care</span></h1>

Before a person leaves hospital after a hip fracture, an individualised care plan is developed that describes their goals of care and ongoing care needs. This plan is developed in discussion with the person and their family or support people. The plan includes mobilisation activities and expected function post-injury, wound care, pain management, nutrition, fracture prevention strategies, changed or new medicines, and specific rehabilitation services and equipment. On discharge, the plan is provided to the person and communicated with their general practice and other ongoing clinicians and care providers.

Last Modified: `r format(Sys.time(), "%d %b %Y", tz="Australia/Sydney")` `r format(Sys.time(), "%H:%M:%S", tz="Australia/Sydney")`

<h2><span style="color:#423A8E">Indicator 7a</span></h2>

Evidence of local arrangements for the development of an individualised care plan for hip fracture patients prior to separation from hospital.

[⬅ Go Back to Home](#home){.btn .btn-secondary .btn-lg style="margin-top:20px; width:100%;"}
